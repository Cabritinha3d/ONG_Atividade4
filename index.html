<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platina Para Todos - Democratizando Conquistas Gamers</title>
    <meta name="description" content="Comunidade que ajuda gamers a conquistar trof√©us e platinas atrav√©s de mentorias gratuitas. Democratizamos o acesso √† conclus√£o total de jogos!">
    
    <!-- Meta tags para acessibilidade -->
    <meta name="theme-color" content="#1a1a2e">
    <meta name="color-scheme" content="dark light">
    <meta name="robots" content="index, follow">
    
    <!-- CSS -->
    <link rel="stylesheet" href="src/css/style.css">
    <link rel="stylesheet" href="src/css/accessibility.css">
    
    <style>
        /* Loading para SPA */
        .spa-loading {
            text-align: center;
            padding: 50px;
            font-size: 1.5rem;
        }
        
        /* Banner inicial */
        .hero-banner {
            background: linear-gradient(rgba(26, 26, 46, 0.9), rgba(22, 33, 62, 0.95)), 
                        url('src/images/sobre0.jpeg') no-repeat center center/cover;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
        }

        .banner-overlay {
            max-width: 800px;
            padding: 0 20px;
        }

        .banner-title {
            font-size: 4rem;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7);
            color: white;
        }

        .banner-subtitle {
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: #ffa502;
        }

        .banner-tagline {
            font-size: 1.2rem;
            margin-bottom: 40px;
            color: white;
        }

        .banner-tagline p {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .banner-cta {
            display: inline-block;
            background: linear-gradient(45deg, #ff4757, #ffa502);
            color: white;
            padding: 15px 40px;
            border-radius: 50px;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: bold;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4);
            border: none;
            cursor: pointer;
        }

        .banner-cta:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.6);
        }

        .banner-cta:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        /* SPA Styles */
        #app {
            display: none;
        }

        .spa-loaded #main-banner {
            display: none;
        }

        .spa-loaded #app {
            display: block;
        }

        /* üéØ CORRE√á√ÉO DO MENU DE ACESSIBILIDADE */
        .accessibility-controls {
            position: fixed;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
            background: var(--darker-bg);
            padding: 10px;
            border-radius: 10px 0 0 10px;
            box-shadow: -2px 0 10px rgba(0,0,0,0.3);
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 8px;
            border: 2px solid var(--accent-orange);
            display: none; /* ‚¨ÖÔ∏è Come√ßa escondido */
        }

        /* ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è MOSTRA O MENU QUANDO SPA CARREGA ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è */
        .spa-loaded .accessibility-controls {
            display: flex !important;
        }

        @media (max-width: 768px) {
            .banner-title {
                font-size: 2.5rem;
            }
            
            .banner-subtitle {
                font-size: 1.2rem;
            }
            
            .banner-cta {
                padding: 12px 30px;
                font-size: 1rem;
            }

            .accessibility-controls {
                top: auto !important;
                bottom: 0 !important;
                right: 50% !important;
                transform: translateX(50%) !important;
                flex-direction: row;
            }
        }
    </style>
</head>
<body>
    <!-- Banner Inicial (SPA) -->
    <header class="hero-banner" id="main-banner">
        <div class="banner-overlay">
            <h1 class="banner-title">üéÆ PLATINA PARA TODOS</h1>
            <p class="banner-subtitle">‚ú® "Porque toda conquista nasceu para ser conquistada" ‚ú®</p>
            <div class="banner-tagline">
                <p>üèÜ <strong>Comunidade Gamers</strong> | ü§ù <strong>Ajuda Gratuita</strong> | üöÄ <strong>Resultados Reais</strong></p>
            </div>
            <button id="enter-site" class="banner-cta">Comece Sua Jornada</button>
        </div>
    </header>

    <!-- üéØ MENU DE ACESSIBILIDADE FIXO FORA DO APP -->
    <!-- Agora vai aparecer em TODAS as p√°ginas do SPA -->
    <div class="accessibility-controls" aria-label="Controles de acessibilidade">
        <button class="accessibility-btn" id="highContrastBtn" aria-label="Ativar modo alto contraste" title="Alto Contraste">
            üåó
        </button>
        <button class="accessibility-btn" id="fontSizeBtn" aria-label="Aumentar tamanho da fonte" title="Fonte Maior">
            üîç
        </button>
        <button class="accessibility-btn" id="readingModeBtn" aria-label="Ativar modo de leitura" title="Modo Leitura">
            üìñ
        </button>
        <button class="accessibility-btn" id="resetAccessibilityBtn" aria-label="Redefinir todas as configura√ß√µes de acessibilidade" title="Redefinir">
            üîÑ
        </button>
    </div>

    <!-- Aplica√ß√£o SPA -->
    <div id="app">
        <!-- Aqui as p√°ginas SPA ser√£o carregadas -->
    </div>

    <!-- JavaScript -->
    <script src="src/js/app.js"></script>

    <script>
        // ===== SISTEMA SPA CORRIGIDO =====
        const validPages = ['home', 'projetos', 'guias', 'grupos', 'eventos', 'discord', 'doacao', 'cadastro', 'formobrigado', '404'];
        
        // Gerenciador de Acessibilidade para SPA
        class SPAAccessibilityManager {
            constructor() {
                this.currentFontSize = 0;
                this.isHighContrast = false;
                this.isReadingMode = false;
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadUserPreferences();
                console.log('üéÆ SPAAccessibilityManager inicializado!');
            }

            setupEventListeners() {
                // Usa event delegation para funcionar com conte√∫do din√¢mico
                document.addEventListener('click', (e) => {
                    if (e.target.matches('#highContrastBtn, #highContrastBtn *')) {
                        this.toggleHighContrast();
                    } else if (e.target.matches('#fontSizeBtn, #fontSizeBtn *')) {
                        this.increaseFontSize();
                    } else if (e.target.matches('#readingModeBtn, #readingModeBtn *')) {
                        this.toggleReadingMode();
                    } else if (e.target.matches('#resetAccessibilityBtn, #resetAccessibilityBtn *')) {
                        this.resetAccessibility();
                    }
                });

                // Navega√ß√£o por teclado
                document.addEventListener('keydown', (e) => this.handleKeyboardNavigation(e));
            }

            toggleHighContrast() {
                this.isHighContrast = !this.isHighContrast;
                document.body.classList.toggle('high-contrast', this.isHighContrast);
                
                const button = document.getElementById('highContrastBtn');
                if (button) button.setAttribute('aria-pressed', this.isHighContrast);
                
                this.saveUserPreferences();
                console.log('üåó Alto contraste:', this.isHighContrast);
            }

            increaseFontSize() {
                this.currentFontSize = (this.currentFontSize + 1) % 4;
                
                document.body.classList.remove('font-large', 'font-xlarge', 'font-xxlarge');
                
                switch(this.currentFontSize) {
                    case 1:
                        document.body.classList.add('font-large');
                        console.log('üîç Fonte: Grande');
                        break;
                    case 2:
                        document.body.classList.add('font-xlarge');
                        console.log('üîç Fonte: Extra Grande');
                        break;
                    case 3:
                        document.body.classList.add('font-xxlarge');
                        console.log('üîç Fonte: M√°xima');
                        break;
                    default:
                        console.log('üîç Fonte: Normal');
                }
                
                this.saveUserPreferences();
            }

            toggleReadingMode() {
                this.isReadingMode = !this.isReadingMode;
                document.body.classList.toggle('reading-mode', this.isReadingMode);
                
                const button = document.getElementById('readingModeBtn');
                if (button) button.setAttribute('aria-pressed', this.isReadingMode);
                
                this.saveUserPreferences();
                console.log('üìñ Modo leitura:', this.isReadingMode);
            }

            resetAccessibility() {
                this.currentFontSize = 0;
                this.isHighContrast = false;
                this.isReadingMode = false;
                
                // Remove apenas as classes de acessibilidade, mantendo o SPA
                document.body.classList.remove('high-contrast', 'reading-mode', 'font-large', 'font-xlarge', 'font-xxlarge');
                
                // Reseta todos os bot√µes
                const buttons = ['highContrastBtn', 'fontSizeBtn', 'readingModeBtn'];
                buttons.forEach(btnId => {
                    const button = document.getElementById(btnId);
                    if (button) button.setAttribute('aria-pressed', 'false');
                });
                
                this.saveUserPreferences();
                console.log('üîÑ Acessibilidade resetada (SPA mantido)');
            }

            handleKeyboardNavigation(event) {
                // Atalhos de teclado para acessibilidade
                if (event.altKey) {
                    switch(event.key) {
                        case '1':
                            event.preventDefault();
                            document.getElementById('inicio')?.scrollIntoView({ behavior: 'smooth' });
                            break;
                        case '2':
                            event.preventDefault();
                            document.getElementById('sobre')?.scrollIntoView({ behavior: 'smooth' });
                            break;
                        case '3':
                            event.preventDefault();
                            document.getElementById('mentoria')?.scrollIntoView({ behavior: 'smooth' });
                            break;
                        case '0':
                            event.preventDefault();
                            this.resetAccessibility();
                            break;
                    }
                }
            }

            saveUserPreferences() {
                const preferences = {
                    fontSize: this.currentFontSize,
                    highContrast: this.isHighContrast,
                    readingMode: this.isReadingMode,
                    timestamp: Date.now()
                };
                
                try {
                    localStorage.setItem('platinaAccessibility', JSON.stringify(preferences));
                } catch (error) {
                    console.warn('N√£o foi poss√≠vel salvar prefer√™ncias:', error);
                }
            }

            loadUserPreferences() {
                try {
                    const saved = localStorage.getItem('platinaAccessibility');
                    if (saved) {
                        const preferences = JSON.parse(saved);
                        
                        this.currentFontSize = preferences.fontSize || 0;
                        this.isHighContrast = preferences.highContrast || false;
                        this.isReadingMode = preferences.readingMode || false;
                        
                        // Aplica as prefer√™ncias salvas
                        if (this.isHighContrast) document.body.classList.add('high-contrast');
                        if (this.isReadingMode) document.body.classList.add('reading-mode');
                        
                        switch(this.currentFontSize) {
                            case 1: document.body.classList.add('font-large'); break;
                            case 2: document.body.classList.add('font-xlarge'); break;
                            case 3: document.body.classList.add('font-xxlarge'); break;
                        }
                    }
                } catch (error) {
                    console.warn('N√£o foi poss√≠vel carregar prefer√™ncias:', error);
                }
            }
        }

        // Sistema SPA Principal
        let spaAccessibilityManager = null;
        let currentPage = 'home';

        function initializeSPA() {
            if (!spaAccessibilityManager) {
                spaAccessibilityManager = new SPAAccessibilityManager();
            }
            
            // Scroll suave para links √¢ncora
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href.startsWith('#')) {
                        e.preventDefault();
                        const target = document.querySelector(href);
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    }
                });
            });

            console.log('‚úÖ SPA inicializado para:', currentPage);
        }

        function loadPage(page) {
            if (!validPages.includes(page)) {
                loadPage('404');
                return;
            }

            currentPage = page;
            const app = document.getElementById('app');
            const enterBtn = document.getElementById('enter-site');
            
            app.innerHTML = '<div class="spa-loading">üöÄ Carregando...</div>';
            
            fetch(`src/pages/${page}.html`)
                .then(response => {
                    if (!response.ok) throw new Error('P√°gina n√£o encontrada');
                    return response.text();
                })
                .then(html => {
                    app.innerHTML = html;
                    window.scrollTo(0, 0);
                    window.history.pushState({}, '', `#/${page}`);
                    
                    // RESETA O BOT√ÉO "COME√áAR SUA JORNADA"
                    if (enterBtn) {
                        enterBtn.textContent = 'Comece Sua Jornada';
                        enterBtn.disabled = false;
                    }
                    
                    // INICIALIZA A ACESSIBILIDADE PARA A NOVA P√ÅGINA
                    setTimeout(initializeSPA, 50);
                })
                .catch(error => {
                    console.error('Erro ao carregar p√°gina:', error);
                    
                    // RESETA O BOT√ÉO MESMO EM CASO DE ERRO
                    if (enterBtn) {
                        enterBtn.textContent = 'Comece Sua Jornada';
                        enterBtn.disabled = false;
                    }
                    
                    loadPage('404');
                });
        }

        function getCurrentPage() {
            const hash = window.location.hash;
            return hash.startsWith('#/') ? hash.substring(2) || 'home' : 'home';
        }

        function handleNavigation() {
            const page = getCurrentPage();
            loadPage(page);
            document.body.classList.add('spa-loaded');
        }

        // Event Listeners
        document.getElementById('enter-site').addEventListener('click', function() {
            this.textContent = 'üöÄ CARREGANDO...';
            this.disabled = true;
            window.location.hash = '#/home';
        });

        window.addEventListener('hashchange', handleNavigation);
        
        window.addEventListener('DOMContentLoaded', function() {
            // Inicializa acessibilidade global
            spaAccessibilityManager = new SPAAccessibilityManager();
            
            // Verifica se j√° tem hash na URL
            if (window.location.hash) {
                handleNavigation();
            }
        });

        // Suporte a navega√ß√£o SPA para links
        document.addEventListener('click', function(e) {
            const link = e.target.closest('a');
            if (link && link.href && link.href.includes('#/')) {
                e.preventDefault();
                window.location.hash = new URL(link.href).hash;
            }
        });

        // Fallback para erro de carregamento
        window.addEventListener('error', function(e) {
            console.error('Erro global:', e);
            const enterBtn = document.getElementById('enter-site');
            if (enterBtn && enterBtn.disabled) {
                enterBtn.textContent = 'Comece Sua Jornada';
                enterBtn.disabled = false;
            }
        });
    </script>
</body>
</html>
